# 이미지 이름 넣기 (시스템에 존재하거나 도커 허브상의 이미지 이름) 
FROM node

#도커 컨테이너의 작업 디렉토리 설정
WORKDIR /app

# 두개의 경로를 지정
# 첫번째 . 이 프로젝트의 모든 폴더, 하위 폴더 및 파일을 복사해야한다고 도커에게 알림
# 두번째 . 파일을 저장해야 하는 이미지 내부 경로
# Dockerfile과 동일한 폴더에 있는 모든 파일과 거기에 있는 모든 하위 폴더가 컨테이너 내부의 app 폴더에 복사된다.
# 만약 이 폴더가 존재하지 않는다면 이미지와 컨테이너에 생성됨
COPY . /app

# 종속성 설치
RUN npm install

# 특정포트를 노출하고 싶다는 것을 도커에게 알림
# 80포트를 수신하고 있는 컨테이너 실행 가능
EXPOSE 80

# 컨테이너가 시작되는 경우만 서버 시작
# CMD : 이미지를 기반으로 컨테이너가 시작될 때 실행된다.

CMD ["node", "server.js"]